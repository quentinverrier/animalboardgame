@if(gameStateUI.started() == false){ 
  <p>---Lobby---</p>
  @for(playerUI of gameStateUI.players(); track playerUI.id()){
    <p> ID: {{playerUI.id()}} || Name: {{playerUI.name()}} || Ready: {{playerUI.ready()}}</p>
    @if(playerUI.id() == sessionID){
      <form [formGroup]="profileForm"
          (ngSubmit)="setName(sessionID)">
      <input type="name" formControlName="name" minlength="3" maxlength="15" />
      <button type="submit">Changer pseudo</button>
      </form>
      <button (click)="ready(sessionID)">Pr√™t</button>
    }
  }
  <button (click)="startGame(sessionID)">Lancer la partie</button>
}


@if(gameStateUI.started() == true){
  <!-- <p>---GameState---</p>
  @for(playerUI of gameStateUI.players(); track playerUI.id()){
    <p>Name: {{playerUI.name()}} | Mushrooms: {{playerUI.mushrooms()}} |
      Alive: {{playerUI.alive()}} | HandCards: [{{playerUI.handCards()}}] | BoardCards: [{{playerUI.boardCards()}}] | InactiveCards: [{{playerUI.inactiveCards()}}] 
      | canPlay: {{playerUI.canPlay()}} | canKill: {{playerUI.canKill()}} | HandCardsNumber: {{playerUI.handCardsNumber()}} | PublicBoardCard: {{playerUI.publicBoardCard()}}
    </p>
  }

  <p>Players:
    [@for(player of gameStateUI.players(); track player.id()){
      {{player.name()}}
    }]
    | Threshold: {{gameStateUI.mushroomThreshold()}} | Round: {{gameStateUI.round()}} | Turn: {{gameStateUI.turn()}} | cardValue: {{gameStateUI.cardValue()}} | deadCards: [{{gameStateUI.deadCards()}}]</p>

  <p>---Actions---</p>
  @for(playerUI of gameStateUI.players(); track playerUI.id()){
      <p>{{playerUI.name()}}
        @if(playerUI.id() == sessionID){
          @if(playerUI.canPlay() == true){
            @for(i of range(0,4); track $index){
              @if(playerUI.handCards()[i] == true){
                <button (click)="onPlay(i, sessionID)">Jouer {{i+1}}</button>
              }
              
            }
          }
          @if(playerUI.canKill() == true){
            
            @for(i of range(0,4); track $index){
              @if(gameStateUI.getKillableCards().includes(`${i}`)){
                <button (click)="onKill(i, sessionID)">Tuer les {{i+1}}</button>
              }
            }
          }
        }
        | Score: {{playerUI.getScore()}} </p>
      }-->

<p>---Player Boxes---</p>

<div class="player-row-horizontal">

@for(playerUI of gameStateUI.players(); track playerUI.id())
{


<div class="player-box">
  <!-- Carte publique -->
  <div class="public-card">
    @if (!playerUI.alive() || playerUI.canPlay()) {
      <span> </span>
    } @else if (gameStateUI.cardValue() < playerUI.publicBoardCard() || playerUI.publicBoardCard() == -1) {
      <div class="card face-down">‚ùì</div>
    } @else {
      <div class="card face-up">{{ playerUI.publicBoardCard() + 1 }}</div>
    }
  </div>

  <div class="player-row">
    <!-- Cartes inactives √† gauche -->
    <div class="inactive-cards">
      <p>Inactive:</p>
      <div class="card-container">
        @for (i of range(0, 5); track $index) {
          @if (playerUI.inactiveCards()[i] === true) {
            <div class="card inactive">{{ i + 1 }}</div>
          }
        }
      </div>
      <p class="score">Score: {{ playerUI.getScore() }}</p>
    </div>

    <!-- Encadr√© central -->
    <div class="player-center" [class.dead]="!playerUI.alive()">
      <p class="player-name">{{ playerUI.name() }}</p>
      <p class="player-cards">Cartes: {{ playerUI.handCardsNumber() }}</p>
      <p class="mushrooms">üçÑ {{ playerUI.mushrooms() }}</p>
    </div>

    <!-- Actions √† droite -->
    <div class="actions">
      <p>Actions:</p>

      <!-- Cartes jouables -->
      @if (playerUI.id() === sessionID && playerUI.canPlay()) {
        <div class="card-container horizontal">
          @for (i of range(0, 5); track $index) {
            @if (playerUI.handCards()[i] === true) {
              <div class="card playable" (click)="onPlay(i, playerUI.id())" title="Jouer cette carte">
                {{ i + 1 }}
              </div>
            }
          }
        </div>
      }

      <!-- Cartes tuables -->
      @if (playerUI.canKill()){
        @if (playerUI.id() === sessionID) {
        <div class="card-container horizontal">
          @for (i of range(0, 5); track $index) {
            @if (gameStateUI.getKillableCards().includes(`${i}`)) {
              <div class="card killable" (click)="onKill(i, playerUI.id())" title="Tuer les {{ i + 1 }}">
                üíÄ {{ i + 1 }}
              </div>
            }
          }
        </div>
        }
        @else{
          <div class="red">Killing...</div>
        }
      }
      
    </div> <!-- fin actions -->
  </div> <!-- fin player-row -->
</div> <!-- fin player-box -->


}
</div>
@if (gameStateUI.winner() == true){
      <button (click)="toLobby(sessionID)">Retour au lobby</button>
}
}